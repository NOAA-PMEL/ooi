2022-09-01
$ kahn@caldera 02:52:41 ~/ooi/rsn $
  ps -C idl -o pid,start_time
  PID START
21136 14:50
23099 15:05
24730 15:20
$ kahn@caldera 03:29:07 ~/ooi/rsn $
 ps -fww -p 24730
UID        PID  PPID  C STIME TTY          TIME CMD
kahn     24730 24728 98 15:20 ?        00:09:19 /usr/local/IDL/idl85/bin/bin.linux.x86_64/idl RunProcessCTDdata.pro

2022-06-19
$ kahn@caldera 12:45:14 ~/ooi/rsn $
 cat MJ03?/*ProcessingStatus
 0 ; Sun Jun 19 12:36:13 2022 Currently Data are not being processed.
 1 ; Sat May 21 09:51:07 2022 Data are currently being processed.
 0 ; Sun Jun 19 12:37:23 2022 Currently Data are not being processed.
 0 ; Sun Jun 19 12:38:02 2022 Currently Data are not being processed.

n Fri, Jun 17, 2022 at 7:10 PM William Chadwick <william.w.chadwick@gmail.com> wrote:
Brian -
   OK, read the message below from Andy - I think this must be what is going on.  Please search for the MJ03D.Status file (or similar name) and see if it has a 1 or a 0 in the first line.  If it is a 1 (=stop processing), try just changing the 1 to a 0, and let me know and we'll see if the plotting resumes.
      If it does NOT, and it changes the 0 to a 1 again, it probably means that it encountered a bad record in the MJ03D data.  In that case, it must be in the 05/21/2022 MJ03D BOTPT daily data file that you ftp-ed from UW.  Please copy that file somewhere where I can copy it (Google Drive or in an ftp directory), and I can go through it and look for a bad record.  If that's the problem, I can edit the data file and send it back to you, and then we can see if the MJ03D data processing & plotting will resume by itself, or if other intervention is necessary.  We'd probably have to consult Andy if that is the case.
         We leave port at ~6pm on Sunday, so if there is any way you can do the above before I depart, it might make data file transfer easier, but if not, we'll figure out a way.
            Thanks!
            -Bill

            ---------- Forwarded message ---------
            From: Andy Lau <taikwantkl@gmail.com>
            Date: Tue, Sep 28, 2021 at 12:19 AM
            Subject: Re: Update: Here's what I see in the OOI data plots - Sat 09/24/21
            To: Brian Kahn - NOAA Affiliate <brian.kahn@noaa.gov>
            Cc: William Chadwick <william.w.chadwick@gmail.com>


            Hi Brian,

            There's a file which l cannot remember it's exact name, it should be something like: MJ03[B,D-F]. Status.  Every time when the RSN processing program starts, it opens that status file and read the 1st line (the rest of the records will be ignored). If the 1st line contains a zero value which means OK to proceed.  Then the program will change the zero value to 1 and close the file.  That will lock up the process until the current program finished it's processing.  Before the program exits, it will reopen the status file and change the 1 to 0, save the status file then exit.

            If the processing program is stopped by some reason such as stopped by users or the program encountered bad data, the status file will not be reset.  Then when the processing program is resumed and it checks out the status file, it will show the value =1 means other processing is on.  The program will give the "Cannot lock ..." message and then the program stops.

Oct 26  2021
some jobs remove and restore crontab, so
 ln -s ~/crontab ~/4Chadwick/RSN/ProcessRSNdata.crontab
 # make sure crontab is there at startup

~/idl/is_number.pro ~/idl/match.pro ~/idl/IDLcolors.pro
grep PlotForecastDates.pro *
RunDiffForecastDates.pro: .RUN ~/4Chadwick/RSN/PlotForecastDates.pro  ; For PRO PLOT_FORECAST_[STOGRAM/PORJECTION]
 grep RunDiffForecastDates.pro *
RunForecastDates.job:/usr/local/bin/idl < RunDiffForecastDates.pro >> RunForecastDates.log 2>&1
 grep RunForecastDates.job *
RunForecastDates.job:at 23:30 -f RunForecastDates.job 2>> RunForecastDates.log

 for i in *.job; do grep $i $i; done
at 03:00 -f BackUpIDLfiles2data.job 2>> BackUpIDLfiles2data.log
at 18:30 -f GetLongTermDataProducts.job 2>> GetLongTermDataProducts.log
at next hour -f ProcessRSNdataMJ03F.job  2> ProcessRSNdataMJ03F.log
at 23:30 -f RunForecastDates.job 2>> RunForecastDates.log
at 20:30 -f RunGetRates.job 2>> RunGetRates.log
at 22:30 -f RunPlotMJ03D-LILY.job 2>> RunPlotMJ03D-LILY.log
at 01:30 -f RunPlotMJ03E-LILY.job 2>> RunPlotMJ03E-LILY.log
at 21:30 -f RunPlotMJ03F-LILY.job 2>> RunPlotMJ03F-LILY.log
at 03:51 -f RunPrintRSNdata2Files.job 2>> RunPrintRSNdata2Files.log
at 18:30 -f RunUpdateRSNsaveFiles.job 2>> RunUpdateRSNsaveFiles.log
at 00:30 -f SaveCTDdata.job    2>> SaveCTDdata.log

watch out:
~/idl/IDLcolors.pro
~/idl/match.pro

chain:
5,20,35,50 * *   *   *   /home/kahn/ooi/rsn/ProcessRSNdata.job
 -> ProcessRSN-MJ03Bdata.pro -> PrintRSNdata2Files.pro
 -> ;       Generate a New OUTPUT_FILE name, e.g. 'MJ03D2019LILY.Data'
